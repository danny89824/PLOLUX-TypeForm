<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Request | PLORUX</title>
    <style>
        /* 1. ê¸°ë³¸ ì„¤ì • (Reset & Variables) */
        :root {
            --bg-color: #0f1115; /* ë‹¤í¬ ë°±ê·¸ë¼ìš´ë“œ */
            --card-bg: #1c1f26;
            --text-main: #ffffff;
            --text-sub: #8b95a5;
            --accent-color: #3b82f6; /* PLORUX Blue */
            --accent-hover: #2563eb;
            --border-color: #2d333b;
            --success-color: #10b981;
            --error-color: #ef4444;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif; }
        
        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        /* 2. ë ˆì´ì•„ì›ƒ ì»¨í…Œì´ë„ˆ */
        .container {
            width: 100%;
            max-width: 700px;
            background: var(--card-bg);
            border-radius: 20px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            border: 1px solid var(--border-color);
            position: relative;
        }

        /* 3. í—¤ë” & í”„ë¡œê·¸ë ˆìŠ¤ ë°” */
        .header {
            padding: 30px 40px;
            border-bottom: 1px solid var(--border-color);
            text-align: center;
        }
        
        .logo {
            font-size: 24px;
            font-weight: 800;
            letter-spacing: 1px;
            color: var(--text-main);
            margin-bottom: 5px;
        }
        .logo span { color: var(--accent-color); }
        
        .sub-title { font-size: 14px; color: var(--text-sub); margin-bottom: 20px; }

        .progress-container {
            width: 100%;
            background-color: #2d333b;
            height: 4px;
            border-radius: 2px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background-color: var(--accent-color);
            width: 0%;
            transition: width 0.4s ease;
        }

        /* 4. í¼ ì˜ì—­ (Wizard Steps) */
        .form-body { padding: 40px; }
        
        .step { display: none; animation: fadeIn 0.5s ease; }
        .step.active { display: block; }
        
        .step-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .step-desc {
            color: var(--text-sub);
            font-size: 14px;
            margin-bottom: 30px;
        }

        /* 5. ì…ë ¥ ìš”ì†Œ ìŠ¤íƒ€ì¼ë§ (Card UI) */
        .input-group { margin-bottom: 25px; }
        .input-label { display: block; margin-bottom: 10px; font-weight: 600; font-size: 15px; }
        
        /* í…ìŠ¤íŠ¸ ì¸í’‹ */
        input[type="text"], textarea {
            width: 100%;
            padding: 15px;
            background: #14161b;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            color: white;
            font-size: 15px;
            transition: 0.3s;
        }
        
        input[type="text"]:focus, textarea:focus {
            outline: none;
            border-color: var(--accent-color);
        }
        
        textarea { resize: none; height: 100px; }

        /* ì„ íƒí˜• ì¹´ë“œ (Radio/Checkbox) */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .option-card {
            position: relative;
        }
        
        .option-card input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }
        
        .option-content {
            display: flex;
            align-items: center;
            padding: 15px;
            background: #14161b;
            border: 1px solid var(--border-color);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .option-card input:checked + .option-content {
            border-color: var(--accent-color);
            background: rgba(59, 130, 246, 0.1);
        }
        
        .option-icon { margin-right: 10px; font-size: 18px; }
        .option-text { font-size: 14px; font-weight: 500; }

        /* 6. í•˜ë‹¨ ë²„íŠ¼ ì˜ì—­ */
        .footer {
            padding: 20px 40px 40px;
            display: flex;
            justify-content: space-between;
        }
        
        button {
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s;
            font-size: 15px;
        }
        
        .btn-prev {
            background: transparent;
            color: var(--text-sub);
            border: 1px solid var(--border-color);
        }
        
        .btn-prev:hover { border-color: var(--text-main); color: var(--text-main); }
        
        .btn-next {
            background: var(--accent-color);
            color: white;
        }
        
        .btn-next:hover { background: var(--accent-hover); }
        .btn-next:disabled { background: var(--text-sub); cursor: not-allowed; opacity: 0.5; }

        /* ë¡œë”© ìŠ¤í”¼ë„ˆ */
        .spinner {
            display: inline-block;
            width: 12px;
            height: 12px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-right: 8px;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ì™„ë£Œ í™”ë©´ */
        .success-message {
            text-align: center;
            padding: 40px 0;
        }
        .check-icon {
            font-size: 50px;
            color: var(--success-color);
            margin-bottom: 20px;
        }
        .error-message {
            color: var(--error-color);
            text-align: center;
            margin-top: 10px;
            font-size: 14px;
            display: none;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header">
        <div class="logo">PLORUX</div>
        <div class="sub-title">AI-Driven Web Agency Project Request</div>
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
    </div>

    <form id="wizardForm" class="form-body" onsubmit="return false;">
        
        <div class="step active" data-step="1">
            <div class="step-title">Step 1. í”„ë¡œì íŠ¸ì˜ ë³¸ì§ˆ</div>
            <div class="step-desc">ì›¹ì‚¬ì´íŠ¸ë¥¼ ë§Œë“œëŠ” ê°€ì¥ ì¤‘ìš”í•œ ëª©ì ì„ ì•Œë ¤ì£¼ì„¸ìš”.</div>
            
            <div class="input-group">
                <label class="input-label">ì£¼ëœ ëª©ì ì´ ë¬´ì—‡ì¸ê°€ìš”?</label>
                <div class="options-grid">
                    <label class="option-card">
                        <input type="radio" name="goal" value="branding" checked>
                        <div class="option-content">
                            <span class="option-icon">ğŸ¢</span>
                            <span class="option-text">ê¸°ì—… ë¸Œëœë”©/ì‹ ë¢°ë„</span>
                        </div>
                    </label>
                    <label class="option-card">
                        <input type="radio" name="goal" value="marketing">
                        <div class="option-content">
                            <span class="option-icon">ğŸ“£</span>
                            <span class="option-text">ê³ ê° ë¬¸ì˜/DB í™•ë³´</span>
                        </div>
                    </label>
                    <label class="option-card">
                        <input type="radio" name="goal" value="commerce">
                        <div class="option-content">
                            <span class="option-icon">ğŸ›’</span>
                            <span class="option-text">ì œí’ˆ íŒë§¤ (ì»¤ë¨¸ìŠ¤)</span>
                        </div>
                    </label>
                </div>
            </div>

            <div class="input-group">
                <label class="input-label">í•µì‹¬ íƒ€ê²Ÿì€ ëˆ„êµ¬ì¸ê°€ìš”?</label>
                <input type="text" name="target_audience" placeholder="ì˜ˆ: 3040 ì „ë¬¸ì§ ë‚¨ì„±, B2B êµ¬ë§¤ ë‹´ë‹¹ì ë“±" required>
            </div>
             <div class="input-group">
                <label class="input-label">ì„±ê³µ ê¸°ì¤€ (KPI)</label>
                <input type="text" name="kpi" placeholder="ì˜ˆ: ì›” ìƒë‹´ 30ê±´, íšŒì‚¬ëª… ê²€ìƒ‰ ë…¸ì¶œ" required>
            </div>
        </div>

        <div class="step" data-step="2">
            <div class="step-title">Step 2. êµ¬ì„±ê³¼ ê¸°ëŠ¥</div>
            <div class="step-desc">ì–´ë–¤ ê¸°ëŠ¥ë“¤ì´ í¬í•¨ë˜ì–´ì•¼ í•˜ë‚˜ìš”?</div>
            
            <div class="input-group">
                <label class="input-label">í•„ìˆ˜ ê¸°ëŠ¥ (ë‹¤ì¤‘ ì„ íƒ)</label>
                <div class="options-grid">
                    <label class="option-card">
                        <input type="checkbox" name="features" value="login">
                        <div class="option-content">
                            <span class="option-icon">ğŸ”’</span>
                            <span class="option-text">íšŒì›ê°€ì…/ë¡œê·¸ì¸</span>
                        </div>
                    </label>
                    <label class="option-card">
                        <input type="checkbox" name="features" value="payment">
                        <div class="option-content">
                            <span class="option-icon">ğŸ’³</span>
                            <span class="option-text">ê²°ì œ ì‹œìŠ¤í…œ</span>
                        </div>
                    </label>
                    <label class="option-card">
                        <input type="checkbox" name="features" value="multilingual">
                        <div class="option-content">
                            <span class="option-icon">ğŸŒ</span>
                            <span class="option-text">ë‹¤êµ­ì–´ ì§€ì›</span>
                        </div>
                    </label>
                    <label class="option-card">
                        <input type="checkbox" name="features" value="chat">
                        <div class="option-content">
                            <span class="option-icon">ğŸ’¬</span>
                            <span class="option-text">ì‹¤ì‹œê°„ ìƒë‹´í†¡</span>
                        </div>
                    </label>
                </div>
            </div>
            
            <div class="input-group">
                <label class="input-label">ë©”ë‰´ êµ¬ì„±(ì‚¬ì´íŠ¸ë§µ)</label>
                <input type="text" name="sitemap_status" placeholder="ì˜ˆ: ì¤€ë¹„ëœ íŒŒì¼ ìˆìŒ, í˜¹ì€ ì—ì´ì „ì‹œ ì œì•ˆ í•„ìš”">
            </div>
        </div>

        <div class="step" data-step="3">
            <div class="step-title">Step 3. ë””ìì¸ ë°©í–¥ì„±</div>
            <div class="step-desc">ì›í•˜ì‹œëŠ” ë¶„ìœ„ê¸°ë¥¼ ì‹œê°ì ìœ¼ë¡œ ë§ì”€í•´ì£¼ì„¸ìš”.</div>
            
            <div class="input-group">
                <label class="input-label">ì„ í˜¸í•˜ëŠ” ìŠ¤íƒ€ì¼</label>
                <div class="options-grid">
                    <label class="option-card">
                        <input type="radio" name="design_style" value="simple" checked>
                        <div class="option-content">
                            <span class="option-text">âœ¨ ì‹¬í”Œ & ë¯¸ë‹ˆë©€</span>
                        </div>
                    </label>
                    <label class="option-card">
                        <input type="radio" name="design_style" value="trust">
                        <div class="option-content">
                            <span class="option-text">ğŸ›ï¸ ì‹ ë¢°ê° & ë¬´ê²Œê°</span>
                        </div>
                    </label>
                    <label class="option-card">
                        <input type="radio" name="design_style" value="trendy">
                        <div class="option-content">
                            <span class="option-text">âš¡ íŠ¸ë Œë”” & í™í•œ</span>
                        </div>
                    </label>
                </div>
            </div>

            <div class="input-group">
                <label class="input-label">ë²¤ì¹˜ë§ˆí‚¹ ì‚¬ì´íŠ¸ URL</label>
                <input type="text" name="benchmark_url" placeholder="https://..." required>
            </div>
            <div class="input-group">
                <label class="input-label">ì–´ë–¤ ì ì´ ë§ˆìŒì— ë“œì…¨ë‚˜ìš”?</label>
                <textarea name="design_comment" placeholder="ì˜ˆ: ë©”ì¸ ë°°ë„ˆì˜ ì›€ì§ì„ì´ ì¢‹ì•˜ìŠµë‹ˆë‹¤. í°íŠ¸ê°€ ê¹”ë”í•©ë‹ˆë‹¤."></textarea>
            </div>
        </div>

        <div class="step" data-step="4">
            <div class="step-title">Step 4. ìš´ì˜ ë° ê´€ë¦¬</div>
            <div class="step-desc">ê°œë°œ í›„ ì§ì ‘ ê´€ë¦¬í•´ì•¼ í•  ì˜ì—­ì„ ì •í•©ë‹ˆë‹¤.</div>
            
            <div class="input-group">
                <label class="input-label">ì§ì ‘ ìˆ˜ì •ì´ í•„ìš”í•œ ì˜ì—­</label>
                <div class="options-grid">
                    <label class="option-card">
                        <input type="checkbox" name="admin_scope" value="popup">
                        <div class="option-content">
                            <span class="option-text">íŒì—…/ë°°ë„ˆ ê´€ë¦¬</span>
                        </div>
                    </label>
                    <label class="option-card">
                        <input type="checkbox" name="admin_scope" value="notice">
                        <div class="option-content">
                            <span class="option-text">ê³µì§€ì‚¬í•­ ê²Œì‹œíŒ</span>
                        </div>
                    </label>
                    <label class="option-card">
                        <input type="checkbox" name="admin_scope" value="recruit">
                        <div class="option-content">
                            <span class="option-text">ì±„ìš© ê³µê³ </span>
                        </div>
                    </label>
                </div>
            </div>
            
            <div class="input-group">
                <label class="input-label">ì˜ˆìƒ ì˜ˆì‚° ë° ì¼ì •</label>
                <input type="text" name="budget_schedule" placeholder="ì˜ˆ: 500~1000ë§Œì› / 1ê°œì›” ì´ë‚´">
            </div>
            
            <div id="errorMsg" class="error-message"></div>
        </div>

        <div class="step" id="successStep">
            <div class="success-message">
                <div class="check-icon">âœ“</div>
                <h2>ì˜ë¢°ê°€ ì„±ê³µì ìœ¼ë¡œ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤</h2>
                <p style="color: var(--text-sub); margin-top: 10px;">
                    ì‘ì„±í•´ì£¼ì‹  ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ<br>
                    PLORUXíŒ€ì´ <b>'ê¸°íš ì œì•ˆì„œ'</b>ë¥¼ ì¤€ë¹„í•˜ì—¬<br>
                    ë¹ ë¥¸ ì‹œì¼ ë‚´ì— ì—°ë½ë“œë¦¬ê² ìŠµë‹ˆë‹¤.
                </p>
            </div>
        </div>

    </form>

    <div class="footer" id="formFooter">
        <button type="button" class="btn-prev" id="prevBtn" onclick="nextStep(-1)" style="visibility: hidden;">ì´ì „</button>
        <button type="button" class="btn-next" id="nextBtn" onclick="handleNext()">ë‹¤ìŒ</button>
    </div>
</div>

<script>
    // --- ì„¤ì •ê°’ ---
    const WEBHOOK_URL = "https://recommand.app.n8n.cloud/webhook/1dd838ad-6b05-4a70-a16d-36d360bf3f0f";
    
    // --- ìƒíƒœ ë³€ìˆ˜ ---
    let currentStep = 1;
    const totalSteps = 4;
    let isSubmitting = false;

    // --- UI ì—…ë°ì´íŠ¸ í•¨ìˆ˜ ---
    function updateUI() {
        const steps = document.querySelectorAll('.step');
        steps.forEach(step => step.classList.remove('active'));
        
        // ì™„ë£Œ í™”ë©´ ì²˜ë¦¬
        if (currentStep > totalSteps) {
            document.getElementById('successStep').classList.add('active');
            document.getElementById('formFooter').style.display = 'none';
            document.getElementById('progressBar').style.width = '100%';
            return;
        }

        // í˜„ì¬ ë‹¨ê³„ í™œì„±í™”
        document.querySelector(`.step[data-step="${currentStep}"]`).classList.add('active');

        // ë²„íŠ¼ ìƒíƒœ ê´€ë¦¬
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        
        if (currentStep === 1) {
            prevBtn.style.visibility = 'hidden';
        } else {
            prevBtn.style.visibility = 'visible';
        }

        if (currentStep === totalSteps) {
            nextBtn.innerText = 'ì œì¶œí•˜ê¸°';
            nextBtn.style.backgroundColor = '#10b981'; // ì™„ë£Œ ì‹œ ì´ˆë¡ìƒ‰
        } else {
            nextBtn.innerText = 'ë‹¤ìŒ';
            nextBtn.style.backgroundColor = ''; // ì›ë˜ ìƒ‰ ë³µêµ¬
        }

        // í”„ë¡œê·¸ë ˆìŠ¤ ë°” ì—…ë°ì´íŠ¸
        const progress = ((currentStep - 1) / totalSteps) * 100;
        document.getElementById('progressBar').style.width = `${progress}%`;
    }

    // --- 'ë‹¤ìŒ' ë²„íŠ¼ í´ë¦­ í•¸ë“¤ëŸ¬ ---
    function handleNext() {
        if (currentStep === totalSteps) {
            submitForm(); // ë§ˆì§€ë§‰ ë‹¨ê³„ë©´ ì œì¶œ
        } else {
            nextStep(1); // ì•„ë‹ˆë©´ ë‹¤ìŒ ë‹¨ê³„ë¡œ
        }
    }

    // --- ë‹¨ê³„ ì´ë™ í•¨ìˆ˜ ---
    function nextStep(n) {
        currentStep += n;
        updateUI();
    }

    // --- ë°ì´í„° ì „ì†¡ í•¨ìˆ˜ (Webhook) ---
    async function submitForm() {
        if (isSubmitting) return; // ì¤‘ë³µ í´ë¦­ ë°©ì§€

        const nextBtn = document.getElementById('nextBtn');
        const errorMsg = document.getElementById('errorMsg');
        
        // 1. UI ìƒíƒœ ë³€ê²½ (ë¡œë”© ì¤‘)
        isSubmitting = true;
        nextBtn.innerHTML = '<span class="spinner"></span>ì „ì†¡ ì¤‘...';
        nextBtn.disabled = true;
        errorMsg.style.display = 'none';

        try {
            // 2. í¼ ë°ì´í„° ìˆ˜ì§‘
            const form = document.getElementById('wizardForm');
            const formData = new FormData(form);
            const data = {};

            // FormDataë¥¼ JSON ê°ì²´ë¡œ ë³€í™˜ (ì¤‘ë³µëœ í‚¤ëŠ” ë°°ì—´ë¡œ ì²˜ë¦¬)
            for (const [key, value] of formData.entries()) {
                if (!data[key]) {
                    data[key] = value;
                } else {
                    if (!Array.isArray(data[key])) {
                        data[key] = [data[key]];
                    }
                    data[key].push(value);
                }
            }
            
            // ë©”íƒ€ ë°ì´í„° ì¶”ê°€ (ì„ íƒì‚¬í•­)
            data.submittedAt = new Date().toISOString();

            // 3. n8n ì›¹í›…ìœ¼ë¡œ ë°ì´í„° ì „ì†¡
            const response = await fetch(WEBHOOK_URL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            });

            if (response.ok) {
                // ì„±ê³µ ì‹œ ì™„ë£Œ í™”ë©´ìœ¼ë¡œ ì´ë™
                currentStep++;
                updateUI();
            } else {
                throw new Error('ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜');
            }

        } catch (error) {
            console.error('Submission Error:', error);
            errorMsg.innerText = "ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";
            errorMsg.style.display = 'block';
            
            // ë²„íŠ¼ ìƒíƒœ ë³µêµ¬
            nextBtn.innerText = 'ì œì¶œí•˜ê¸°';
            nextBtn.disabled = false;
        } finally {
            isSubmitting = false;
        }
    }

    // ì´ˆê¸° ì‹¤í–‰
    updateUI();
</script>

</body>
</html>
